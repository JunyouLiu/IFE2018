<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>colorFade</title>
        <style>
            ul {
                background-color: #ffbcec;
                padding-left: 100px;
            }
        </style>
    </head>
    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>

        <script>
            var obj = document.querySelector('#fade-obj');
            var btn = document.querySelector('#fade-btn');
            var flag = null;        // 用来存储SetInterval(), 作为clearInterval()的参数
            var i = 100;

            btn.addEventListener('click', function () {
                btn.disabled = true;
                if (this.innerHTML === '淡出') {
                    flag = setInterval(fadeOut, 30);
                }
                if (this.innerHTML === '淡入') {
                    flag = setInterval(fadeIn, 30);
                }
            })

            function fadeOut() {
                obj.style.opacity = i / 100;
                i -= 1;
                if (i <= 0) {
                    clearInterval(flag);
                    btn.innerHTML = '淡入';
                    btn.disabled = false;
                }
            }

            function fadeIn() {
                obj.style.opacity = i / 100;
                i += 1;
                if (i >= 100) {
                    clearInterval(flag);
                    btn.innerHTML = '淡出';
                    btn.disabled = false;
                }
            }
        </script>
    </body>
</html>